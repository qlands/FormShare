<div class="modal inmodal" id="upload_file" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content animated fadeIn">
            <div class="modal-header">
                {% block upload_file_header %}
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">{{ _('Upload file') }}</h4>
                {% endblock upload_file_header %}
            </div>
            <form id="form_upload_file_form" role="form" method="post" class="require_busy" enctype="multipart/form-data" action="{{ request.route_url('form_upload',userid=projectDetails.owner, projcode=projectDetails.project_code, formid=formid) }}">
                {% block upload_file_form %}
                    {{ form.secure_form(request) }}
                    <div class="modal-body">
                        {% block upload_file_form_fields %}
                            <div class="custom-file">
                                <input type="file" name="filetoupload" multiple class="custom-file-input">
                                <label class="custom-file-label" for="inputGroupFile01">{{ _('Choose files') }}</label>
                            </div>
                            <div>
                                <div class="hr-line-dashed"></div>
                                <div class="form-group row"><label class="col-sm-4 col-form-label">{{ _('Overwrite') }}</label>
                                    <div class="col-sm-8"><input type="checkbox" id="overwrite" name="overwrite" class="js-switch"/><span class="form-text m-b-none">{{ _('Overwrite any existent file') }}</span></div>
                                </div>
                            </div>
                            {% set ns = namespace(realtime_used=false) %}
                            {% for file in formFiles %}
                                {% if formDetails.form_case == 1 and formDetails.form_casetype > 1 and file.file_realtimecsv == 1 %}
                                    {% set ns.realtime_used = True %}
                                {% endif %}
                            {% endfor %}
                            {% if projectDetails.project_case == 1 %}
                                {% if formDetails.form_casetype != 1 %}
                                    {% if formDetails.form_caseselectorfilename == "barcode" and not ns.realtime_used %}
                                        <div class="hr-line-dashed"></div>
                                        <div class="form-group row"><label class="col-sm-4 col-form-label">{{ _('Link to real-time CSV case file') }}</label>
                                            <div class="col-sm-8"><input type="checkbox" id="realtime" name="realtime" class="js-switch-casecsv"/><span class="form-text m-b-none">{{ _('FormShare will overwrite the contents of this file with the real-time CSV case file') }}</span></div>
                                        </div>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        {% endblock upload_file_form_fields %}
                    </div>
                    <div class="modal-footer">
                        {% block upload_file_form_actions %}
                            <button id="cancel_file_upload" type="button" class="btn btn-white" data-dismiss="modal">{{ _('Cancel') }}</button>
                            <button type="submit" class="btn btn-primary">{{ _('Upload') }}</button>
                        {% endblock upload_file_form_actions %}
                    </div>
                {% endblock upload_file_form %}
            </form>
        </div>
    </div>
</div>